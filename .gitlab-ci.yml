# The Docker image that will be used to build your app
image: ubuntu:latest

# Define os estágios (fases) da sua pipeline
stages:
  - deploy

# Define o job 'create-pages' que pertence ao estágio 'deploy'
pages:   # <- precisa se chamar "pages" (nome reservado do GitLab Pages)
  stage: deploy
  script:
    - apt-get update
    - apt-get install -y git wget unzip curl
    - git clone https://github.com/flutter/flutter.git --depth 1 -b stable
    - export PATH="$PATH:$(pwd)/flutter/bin"
    - flutter --version
    - flutter pub get
    - flutter build web --release
    - mv build/web public   # o GitLab Pages serve somente a pasta "public"
  artifacts:
    paths:
      - public
  only:
    - main
